---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/name: burrow
  name: burrow
spec:
  minReadySeconds: 5
  progressDeadlineSeconds: 10
  replicas: 1
  revisionHistoryLimit: 3
  selector:
    matchLabels:
      app.kubernetes.io/name: burrow
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app.kubernetes.io/name: burrow
    spec:
      containers:
        - command:
            - sh
            - -c
            - exec sh <(echo IyEvdXNyL2Jpbi9lbnYgc2gKCkVYRUNfQklOPSR7RVhFQ19CSU46LS9jYWNoZWQvYnVycm93fQoKY2QgIiQoZGlybmFtZSAiJEVYRUNfQklOIikiIHx8IHRhaWwgLUYgL2V0Yy9ob3N0cwoKaWYgISAkRVhFQ19CSU4gLWggMj4mMSB8IGdyZXAgY29uZmlnLWRpciA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICBybSAtZiAiJEVYRUNfQklOIgogIGNwIC1hICIkKHdoaWNoIGJ1cnJvdykiICIkRVhFQ19CSU4iCiAgbHMgLWwKZmkKCmVjaG8gSDRzSUFBQUFBQUFBQSsxYWVYUGlSaGFmdi9rVWl1T2taaktMUnhJd0dHZWRMWkE1Qk9Ld3hLbXRYWmN1cEVZWGd5UkFUdnpkOTdVa1FCejJaTGRxTmttVm5vc1pvVzY5ZnNmdkhkMUNjWjA1MG9NVmN2UWJ6M2ozVFlnRUtwZEswZjlBSi8vVEJmaDdSeFZMcFVLWkxIMHVVKzlJaWk0V2krOEk4dHVJYzB5QjUwc3JnbmkzY2wzL3JYbGZHLytMMHZmZmZRcTgxU2NaT1o4MFowMTRSaTczd1BhYXd5clhlYW9PMlB2clg5TmY3L0pYaHU4dnZidFBuMXhwaVc1VWdJMHZXZWFONHRxZlZxN3MrcDg4elZIL0lTbUs1bmxQdm10cXp2M1Z5NEhsc0R2ZzdxK1VDSFNmVkcwdUJaYWYzM0hKTDEzUHYvSHRwWFdWbTlTWmZqZVJZSCtkV3Y1TGlOZmZhR2lMbkpzdlh5SUJGQjNsc1NJYlRUWmMxNHhGTWJVUVN4RHp1TGo4Um9PSDAydm40THN0T1NxUlh4T21Jdm5Fano4U3YrWUlZdTZ1Q0hOTklJZTRacmlSTUt6endzK0U2c0lJUVNnV0FFbGJnYlRtK29mN24xNmltNTYyV21zckw3cjUvVS8zOGMySVkxNG1ycTZUNFNzaXp4Ry9YRjIvVnlWZkl6NyswUGh3WTJ1K0JOK2tHMU9hbTlMVGRjTDl4dC82VjhCRWRSMHQ5NUxMYVlyaEVteFlYNnZUWHNqUjdhV01LcGJzekhTRjFqdU0zYVlVcDcxV3FZb2hOdmx3SVBEbDd0RDF1ME8yd0MycVFaY3BidnNMZmROOXFGVVkyN0xaWm85UzdJM09UWHRkbG1ITm1UTU9GYnRTbU5JTlUyeXhhM1hSWGM4bXZDOU5pbXU1V1hIazVwZ1dKeHZFdGphNjVOVGhPVmJuN0sybDJtT1BmV0EvY2pSdnFhZ1NxSk90MXc5cnBOUWNCd3lxNmdlK3ZpSGF2akVRTHE4bDBRMWJvdXNJUHlQYWxSRGs4MEJQVW9SMVFBYTl6UmdMZGRyMldJWjZIakpWMUc3dTlWM05KdUpxSnJENm5LbDlVWVNxcjZCcU1LTzNsRkxnTGNYcHlWUEJMTE5OZm8xNXMwek5tdEhHMFRYTHRFZHlvYmFja2R1bFVuajgzRWY4UW02Tm45WG1PR1IxRithQkhvVnhLRFBBbTl6b0xPSVJ5QkxLQlhXZXlMMXVIK1JkcTgzS1JwcDBqMjNsOEd1bGFTMFV5bGZ4ZllXdWhHbzE1aTFPZXE2OFNWMkhWZlJJVndLbE1QYkZhYnNyQWQvK3dqWDNPaUcyZytlKzdzUFkxbHg0MElPamUydlo2Vkh5QkhSQ3RWdTJ1ZHlDTFVPV0tTMWt1dlNzVHFqRVZqRFc2cTBWNXhIV3FKa3daakhnWTRVZWRWTDJlZ1E4R0hBUDVDMUZQcG9KTlhvMjJTNUZwcGJZUnRHbEZrOHFyUjd3RlNPWlJkc0VuSTRYVXZPMnM3ZG5lT1RMQ0xzY1RWbHFxNzJjRldJYmlvVzJwVEExYmFkZjZ0NGM3R0dvb09QaFh0VlhVZFdaQzlWdG0xRTZ4RytFTEhuYTV5S1JWNGxmZE0ySE5MVkVpcGVIdE9BRk5nVGtEYzZDU1JKNXdpbmgvWWNvL20xVFJTc2l2eVJ3cktLVkk5a2FYQjdsdHFzUE9ENy9TZVM5c3hIaVg4UnZ2eEU0K1AvKzkzcS9nU1ArZUVMdStuMFUwRnJZOWhWYUpiVnB6V0lYQUFLYk1oVGJOd0ZjQVlzMlNKNDBRb25tMXlwZFJIMVVLN01PdjFTYld6d1hDVEg0OUdHejRUelNCampIeDRhR0lHbURVd3d5NHFjdnkxcEk2dTFHajV4TmVVcWh4Z0lFME9lQlVFV3hnN3FmdVJBQVN5dUJTTjhHSWdRNlI2dXdoa0hORUFZSENRbkFDaVI2Yk9KazhKZzRBUU5Lc1VkcnBkWEdnSWQ1bThVb2NVWU1YdDZRblVjMG41SWRyZUQ1TE1NMzVVTGJCeG1HMkxteXJlajlCYW16Q3hhUzBzenZQdFRodytyZDRlaHo5K0VSUHFQb1dUYXNjVkdBRDEwZCtBU1ArOENtS2d4SUJVWWhBMDByR3dObWJzNHMwTFhVQXZrb3BVVlZvblZiV0JkZDV5d0FSMkhzcVV4cHFEWWJKQVJyWmY0WTIwYWF6SFJ4Q29HS3FwdjVsT3JMQlN6ck9CQmJmaGtBYnU1MWFPTEVPWWJBS2VyZEtWVXBmYUVYSlJrVnRZSnZ5VFovaVY4NG54YnNvRlMyVExaVTFtak1FK1IyL0RJbjFKWWlxbG1Rc0FMMkFXVFJKcmQ2TUNrR1oyc216eUQzeTg2K2ZiaG1HNENKWnNQck5HcUdFbUhDZ2dEdllwMkRrUTFCUDltU25CWFBHVFViSVl5VDBnVDdoYXB3OWEwaFBsUFlWb0k0aGFUUWVnekd6UW9KQWR5ZFRkVEtYTERrYjIwN0xDZk1mOE1tN2NwOEN2Y2NQUGRWK3o1SFBNSlNOUGVTM2FhQ0FlUDhUdTd4eU55Q2ZzN0dLVFZaNEx0UmJDdFFtek5JNnFPZ2E4OFFKTVM5VFFESHZnS3hCZ24wZk8wem0zVDFybENEZWU2WGpra1pHcll4Q1VXeDJWaktFR01kNUhaZXNXbHZOalc4eU83UkdxVzRHSUdmSmdYUTMwcmlOaXdsY1FQenhxVGJBWDBWL04zaGJVaitGcmRvMnl3VXZoT1pGVFdOajBWa3E4Zlp0RTFLVTM0SnliMHluMFBjRkEzd3V4TDU1TEdBNDNzY3FGaitRbVI3OEVrMUdFSStnbUlFT08zVUErMWpjWUZsTXlzRjJSNER4c24xM2tjZ0Y3WVJaL1k4YVlMNVdQWEVSdytRUjZCaDRkdDg2OXluRnpFZllhSnFKdGhzNENLaE9OMG9iMEFCQ3RLK09zWDRBVStuejJQc3VnczI3T0o4Y2o0bTFEWXArenl6VGNOUTdaR084OXdNR2g1NTJuV0hrMFlSNTl3Qnh1ZTVIMjhoWnhkbEdBZDlsc3lpQ0hqb3JWVW9sRWN5UGdOT2t0eXMyQTNJdlNPOTNmUzhkbXNXNlpmaW0vYlg4N3lWOHFjZDh6M1d0eGFJWURNMWprZEZ0cllrMWxPQ09WamVka3Q4TlZad2pobEh6VXZ2K2RHeGRyaE9ZYmR0QVA0c3lPVXJqdUZwOXNHdHZPNkRMUm5qdUllMGFZSmhMT2NsZVU0dzBFSEx0TTUxY2NvYjBtUWI1YjFFejNBMktUbWdaeXJYcGZOZ0w0dWxNOSt5SFh3djNSQjl5RUZyOG1xcmM5aEVIZlU1cWRzWG1welU2UC9jNGRpNFZlVXQzRDMwVVJYdHNzQ3UrbzNIN1c2TXZMYXJ0dmdOUk5LYUs5UldZbGh5NUxCa2l0UFpXcVFCaGEweDRqQXZvUUxXSzYzRUNZKzNURXpTbnE1bjBJS0xRZ1VxUUlXVWNYdk05SFpWNGlGcWladU5RR1hhZTZ1MjZ5SjBQSlNoUWllRnE0WVl4bDFVZDFIZDlCQzU2UXJ3UWRWdGIraHVlZy93RWRweHBxbkg3VGpXTGZKYzBwSmpiNVJXRXZ1WkUwcWxjbEMvYlgva0VjNG9wZ3J5alRleHAwbGR4Ym93YWFTbm91bXNha0lGR3BYV0tzZ0ttY0Y4bzNKdVlmMWIyR3FCampYbzNyWnJaVUVwTE5iTHJpanNvbXl2cElFVmNQb3RSNHZnajhlUGIzYzVGM2c1S3ZpNWhLTXM0aGQzUWNYZncrLzVzbXpnSTlpbUFEWXdQMnZOY20vS2w4b202VXlteHhsLzR4NW40NHZkMEhIbW5aTGVoYXdQR1FZNjNTVENPMlAvRC9SWktlNkVocHQxTk9maHJZNFRzRG5jMnFBWENkdEl2TVVQQitNTlV1bEdLR04rMUFZTm5MajdHakNWYUI3Ky9tcEhoN041TS9LRERuSGx5UVcyTW1YYUlDUGw0eTNpbEdFL3hoMGYrUlYvVVdvSE9zZWozUXJJMzhHWmRRYWRYS0VXU25qTENYbWhMUlJERWJIcFNnbHhTMjJnTTREZHo3bk9aNzRJcTFzMnFYcTdpczdEczdPSjVhV3I4NWt2Y1hmWGpQMGRyV0hGVzN1UVhZNjY3eVJQNFhXaVBGSEFYYWkrZktYYlBKWVpxbU1hbHpIVzBwV05xa0NlR0tKREIvK0E4eG0yOFREcU9IQkhEWDVoU2dNVnR1NTRsMVIwaFZLNWpBWll0bjNsRVNwN2JPeXFFdXlzbHBpUE1Jb3J6MW5WT2NiUzZ4V0g0Wk9ZaUhhS29STGx5Wm9uVG9xdmR6VnBUSjAraiswTVdaWU5xMS9KQ1JqLzU4K3lyYU1ka2k0MUc3UUlYUjZNSTdDN3I0UUc3dHoyVmZ2Y3oxdC8zNkVMNWg2L1dXZVhkWFovN3M3dTVlaGNDNTkwNzEvL0pJZGNxZDVORGxZcmQzTVRTcmFWKzE0S2ZIZWxXYTZrNWhRTGFZNmZYNjdjT2JLME8ranEwQnozZ2c3MGdydUQ4YWN4L01QMmU5QVIva3o0aHVaRVo5OFhUdEIzRS9jbjZhK2NwUk1FUGl0SHJuTjhtazRRVVVkNVJSQzdRL0s3NUR3K2toR3BkMFNzUnQ2U2RNWFFGRk5ieGNmdytHUTluL0M4STY2VHE2dG9NRHBnQjNIUmg5eWU2eVV0djZyZDE3WGF2eU40bjl3Z0NMWWgzUDl0L3cxempTZEZuQlBsTWVPOTZwanlSUEkrNGVybm5maVlQbnpGU3BMbjVYRjNmeGNiNVByOTczTVJRVVRHdU5vcGMwWGN3NWVFOTdGVjB1dW5YYk9EejE2a3E5UjBlYVZKNXNFRUtMbkVpc1VhUldlMitaVTJYMm1lQVR4K0hmWUhMUFBFMXh0OFhXamQ1VCtUc1lIZCtkelQvUFRFZnFNaDFJZUhtUlI1OUxJR0hKMWNSWGYxbFJzc1BYaGVXbXFyTkpzbTN4OE5CR0JUSGRUNUE3Y0NTYjZjWXlnNVdUNEJVYjhuakxwdm9tZzM0elVZcFhDVTNIOTZOazhEWk9lcHc0ellZOS9kSDk5OU9mZmJzL20wbEh6alBqM3QreFRydldQK2F4U25oTUhTZkNNNEEvdS9BcUxUcUVoTWZyNWlhcjFuU09DYWhnR0pwOEo2dTRmMmJ2bVFmaWw1RU9nTm9PUFg0RDRrU1YvemZJeHZZVmpsaDA5Y2RWZ1hobmQ1ZnhWb3g3aldMRS9Mc3Q3L09ldDlTNGRpMEdocnlRb2tLUFRZVU1uNzhkaG1rbVc1RzAzRlZSUXpxM0pjZjFKL0FIYk51M3pwNWN5c2lxUVkwRk5FOTIza0lEdXc4NG9MTFlmbVk5MS83Ykk5dGp2cVBqSDk3b0NyRCt0M2VmS204SktMM3U1SE9wd0xvS3FRZXIwNzR1NldKTW1jNC9wb2prNVQ2dUdGV3I5VDd3bkpjVlF5bUJ4RTdVWXVwOXdURHI4ajhVWS9jdkJPays1YnVFNldpaDg4Z2hkQkpPM1phYnpzRnpwZEovWE1VN0N5N2xNMnFBN1llSTJyTTBTQ2JYZS8zTmovdHVBNllYTWVJOWdyYjhBdktwRjVWWE5DQzJHby9UdHB1RzUrdW81THRZRnJwbXVwRVFycnZZZW5ZUXNYeXo3M2NKZW5ZMFY4RGJBQlVNMHJsdXRoaEJ5OUdqMmU0aTQxNStJTTBILy9mTW9tKzdIa3dkTWgvRE9SL1hPeGdBelhGK3BKa0J6bXVJNXltTkx2TWZXak1FcUZFcVlQdWFNYktiK25jZmdYeE5mKzF6aXZneXY2UmMyZkZWbUg4K2lMc0RvWi92TmlDdWRyRDFLMXBHdG55VEp0WStUWW11MnV3bDB1enF0Z1N5bFpGdkx3MHdNTHBTRmFtWHJKN1ZzTHpPaFFXR0s0SGFCMldwN0Z6aE1vTU9penZhRUFmT2p5RFFsLzFCMU4zVktuVmZ0Q3pkNXRUbFBiMGR3Zi9jdTRqRExLS0tPTU1zb29vNHd5eWlpampETEtLS09NTXNvb280d3l5aWlqakRMS0tLT01Nc29vbzR3eXlpaWpqREw2ODlKL0FNY1o3dWNBVUFBQSB8IGJhc2U2NCAtZCB8IHRhciAteHoKc2ggY29uZmlndXJpbmcuc2gKY2htb2QgYSt4IC4vKi5zaAoKaWYgWyAtbiAiJEFVVE9fUkVMT0FEIiBdOyB0aGVuCiAgZWNobyBJeUV2ZFhOeUwySnBiaTlsYm5ZZ2MyZ0tDbUoxY25KdmQxOWhaR1J5UFNSN01Ub3RNVEkzTGpBdU1DNHhPamd3TURCOUNncDFiblJwYkNCYklDSWtLR04xY213Z0xYTWdJaVJpZFhKeWIzZGZZV1JrY2k5aWRYSnliM2N2WVdSdGFXNHZjbVZoWkhraUtTSWdQU0JTUlVGRVdTQmRPeUJrYnlCemJHVmxjQ0ExT3lCa2IyNWxDZ3AzYUdsc1pTQjBjblZsT3lCa2J3b2dJSE5zWldWd0lEVnRDaUFnWm05eUlHOWlhaUJwYmlBa0tHTjFjbXdnTFhNZ0lpUmlkWEp5YjNkZllXUmtjaTl0WlhSeWFXTnpJaUI4SUdkeVpYQWdYbUoxY25KdmR5QjhJR2R5WlhBZ1gzTjBZWFIxY3lCOElHZHlaWEFnTFhZZ0ozMGdNU1FuSUh3Z2MyVmtJQzFGSUNkemZsNHVLMk5zZFhOMFpYSTlJaWhiWGlJdVhTc3BJaTRyWTI5dWMzVnRaWEpmWjNKdmRYQTlJaWhiWGlJdVhTc3BJaTRyS0Z4a0tYNWpiSFZ6ZEdWeVBWd3hMR052Ym5OMWJXVnlYMmR5YjNWd1BWd3lMRnd6Zm1jbklId2djMjl5ZENCOElIVnVhWEVwT3lCa2J3b2dJQ0FnWTNWeWJDQXRXQ0JFUlV4RlZFVWdJaVJpZFhKeWIzZGZZV1JrY2k5Mk15OXJZV1pyWVM4a0tHVmphRzhnSWlSdlltb2lJSHdnWVhkcklDMUdMQ0FuZTNCeWFXNTBJQ1F4ZlNjcEwyTnZibk4xYldWeUx5UW9aV05vYnlBaUpHOWlhaUlnZkNCaGQyc2dMVVlzSUNkN2NISnBiblFnSkRKOUp5a2lJQ1ltSUdWamFHOEtJQ0JrYjI1bENtUnZibVVLIHwgYmFzZTY0IC1kID5hdXRvcmVsb2FkLnNoCiAgc2ggYXV0b3JlbG9hZC5zaCA+L2Rldi9udWxsIDI+JjEgJgpmaQoKaWYgWyAteiAiJFpLX0VORFBPSU5UUyIgXTsgdGhlbgogIGVjaG8gJ2hvc3RzOiBmaWxlcyBtZG5zNF9taW5pbWFsIFtOT1RGT1VORD1yZXR1cm5dIGRucyBtZG5zNCcgPj4vZXRjL25zc3dpdGNoLmNvbmYKICBldGNkID5ldGNkLmxvZyAyPiYxICYKICB6ZXRjZCAtLXprYWRkciA6MjE4MSAtLWVuZHBvaW50cyBsb2NhbGhvc3Q6MjM3OSA+emV0Y2QubG9nIDI+JjEgJgpmaQoKaWYgWyAtZCBtYW51YWwgXSAmJiBbIC1zICJtYW51YWwvJHtFWEVDX0JJTiMjKi99LnlhbWwiIF07IHRoZW4KICBleGVjICIkRVhFQ19CSU4iIC0tY29uZmlnLWRpciBtYW51YWwKZWxzZQogIGV4ZWMgIiRFWEVDX0JJTiIKZmkK | base64 -d)
          env:
            - name: TZ
              value: Asia/Shanghai
          image: muicoder/burrow:stable
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
                - etcdctl
                - cluster-health
            initialDelaySeconds: 60
            periodSeconds: 30
          name: burrow
          ports:
            - containerPort: 8000
              name: http
            - containerPort: 2379
              name: etcd
          readinessProbe:
            httpGet:
              path: /burrow/admin/ready
              port: http
          startupProbe:
            failureThreshold: 22
            httpGet:
              path: /burrow/admin/ready
              port: http
            initialDelaySeconds: 10
            periodSeconds: 5
          volumeMounts:
            - mountPath: /cached
              name: cached
          workingDir: /cached
      enableServiceLinks: false
      shareProcessNamespace: true
      tolerations:
        - operator: Exists
      volumes:
        - emptyDir: {}
          name: cached
